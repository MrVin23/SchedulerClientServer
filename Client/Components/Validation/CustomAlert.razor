@using Client.Enums

@if (IsVisible)
{
    <div class="alert @GetAlertClass() @GetVariantClass() @Class alert-dismissible d-flex align-items-center" role="alert">
        <i class="bi @GetIcon() me-2 fs-5"></i>
        <div class="flex-grow-1">
            @if (ChildContent != null)
            {
                @ChildContent
            }
            else
            {
                @Message
            }
        </div>
        <button type="button" class="btn btn-sm ms-3 close-btn @GetCloseButtonClass()" @onclick="HandleClose" aria-label="Close">
            <i class="bi bi-x-lg"></i>
        </button>
    </div>
}

@code {
    private string GetAlertClass() => Severity switch
    {
        AlertSeverity.Success => "alert-success",
        AlertSeverity.Warning => "alert-warning",
        AlertSeverity.Error => "alert-danger",
        _ => "alert-info"
    };

    private string GetVariantClass() => Variant switch
    {
        AlertVariant.Outlined => "alert-outline",
        AlertVariant.Text => "alert-text",
        _ => ""
    };

    private string GetIcon() => Severity switch
    {
        AlertSeverity.Success => "bi-check-circle-fill",
        AlertSeverity.Warning => "bi-exclamation-triangle-fill",
        AlertSeverity.Error => "bi-x-circle-fill",
        _ => "bi-info-circle-fill"
    };

    private string GetCloseButtonClass() => Severity switch
    {
        AlertSeverity.Success => "btn-outline-success",
        AlertSeverity.Warning => "btn-outline-warning",
        AlertSeverity.Error => "btn-outline-danger",
        _ => "btn-outline-info"
    };
}
